@model IEnumerable<Models.CopiaLibro>
<!-- Boton del Modal principal -->
<div class="container mt-5 text-center">
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalCopias">
        Ver Copias de "El Principito"
    </button>
</div>


            <div class="modal-header encabezado-modal justify-content-center">
                <h5 class="modal-title titulo-modal"></h5>
                <button type="button" class="btn-close btn-close-white ms-3" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <br>
            <h3 class="titulo-modal">Copias de “El Principito”</h3>
            <br>

            <!-- Buscador, filtros y agregar -->
            <div class="modal-body">
                <div class="d-flex flex-wrap mb-3 align-items-center gap-2">
                    <p class="modal-title titulo-modal" style="width: 130px;"></p>

                    <!-- Buscador -->
                    <div class="col-3">
                        <div class="input-group border-graydark border rounded d-flex align-items-center">
                            <i class="bi bi-search me-2 ms-1 text-secondary"></i>
                            <input type="text" class="form-control border-0 text-secondary" placeholder="Buscar" />
                        </div>
                    </div>

                    <!-- Estados -->
                    <div class="dropdown-center">
                        <button class="btn btn-vino d-flex justify-content-between align-items-center text-truncate dropdown-toggle"
                        type="button"
                        data-bs-toggle="dropdown"
                        style="width: 240px; border: 1px solid #ced4da;">
                            <span class="me-auto">Estado</span>
                        </button>

                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Disponible</a></li>
                            <li><a class="dropdown-item" href="#">Prestado</a></li>
                            <li><a class="dropdown-item" href="#">Reservado</a></li>
                            <li><a class="dropdown-item" href="#">Dañado</a></li>
                        </ul>
                    </div>
                    <p class="modal-title titulo-modal" style="width: 1px;"></p>

                    <!-- Agregar -->
                    <div class="ms-3">
                        <button class="btn boton-agregar" data-bs-toggle="modal" data-bs-target="#modalAgregarCopia">
                            + Agregar Copia
                        </button>
                    </div>
                </div>

                <!-- Estructura de las cards-->
                <div class="row g-3">
                    @foreach (var item in Model)
                    {
                        <!-- Card -->
                        <div class="col-md-6">
                            <div class="tarjeta-copia">
                            <img src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1328876389i/866618.jpg" 
                            alt="El Principito"
                            style="width:100px; height:170px; object-fit:cover;" />

                                <div class="texto-tarjeta">
                                    <div>Copia #@item.IdEstadoCopiaLibro</div>
                                    <div>Estado: <br>@item.EstadoCopiaLibro</div>
                                </div>

                                <div class="dropdown ms-auto">
                                    <i class="bi bi-gear-fill icono-ajustes" data-bs-toggle="dropdown"></i>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <button class="dropdown-item text-danger text-primary fs-5" data-bs-toggle="modal" data-bs-target="#modalEditarCopia">
                                                <i class="bi bi-pencil me-2"></i><span class="texto-editar">Editar</span>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="dropdown-item text-danger text-primary fs-5" data-bs-toggle="modal" data-bs-target="#modalEliminarCopia">
                                                <i class="bi bi-trash me-2"></i><span class="texto-eliminar">Eliminar</span>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                </div>


    <!-- Modal eliminar Copia -->
    <div class="modal fade" id="modalEliminarCopia" tabindex="-1" aria-labelledby="modalEliminarLabel6" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <div class="modal-body text-center">
                    <i class="bi bi-exclamation-circle fs-1 text-danger"></i>
                    <h5 class="mt-3">Confirmar eliminación de la copia</h5>

                    <div class="libro-box">
                        <img src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1328876389i/866618.jpg" alt="El Principito" />
                        <div class="libro-info">
                            <div class="titulo">El Principito</div>
                            <div class="codigo">Copia #00</div>
                        </div>
                    </div>

                    <p>¿Seguro que desea eliminar esta copia?</p>
                </div>

                <div class="modal-footer d-grid gap-2 d-md-flex justify-content-md-end">
                    <button class="btn btn-secondary me-md-2" type="button" data-bs-toggle="modal" data-bs-target="#modalError">Cancelar</button>
                    <button class="btn btn-danger" type="button" data-bs-toggle="modal" data-bs-target="#ModalExito">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal editar Copia -->
    <div class="modal fade" id="modalEditarCopia" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header encabezado-modal justify-content-center">
                    <h5 class="modal-title titulo-modal"></h5>
                    <button type="button" class="btn-close btn-close-white ms-3" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body text-center">
                    <h5 class="titulo-modal2">Nueva copia del libro</h5>
                    <h5 class="titulo-modal2">"El Principito"</h5>
                    <br />
                    <div class="row">
                        <div class="col-md-6">
                            <br />
                            <br />
                            <br />
                            <div class="mb-3">
                                <label for="nombreCopia" class="form-label">Número de ISBN del libro</label>
                                <input type="text" class="form-control" id="nombreCopia" placeholder="Ej: copia 001" />
                            </div>

                            <br />

                            <div class="mb-4">
                                <div class="dropdown-left">
                                    <button class="btn btn-vino d-flex justify-content-between align-items-center text-truncate dropdown-toggle"
                                            type="button"
                                            data-bs-toggle="dropdown"
                                            style="width: 300px; border: 1px solid #ced4da;">
                                        Estado
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Disponible</a></li>
                                        <li><a class="dropdown-item" href="#">Prestado</a></li>
                                        <li><a class="dropdown-item" href="#">Reservado</a></li>
                                        <li><a class="dropdown-item" href="#">Dañado</a></li>
                                    </ul>
                                </div>
                            </div>
                            <br />
                            <br />
                            <br />
                            <br />

                            <div class="d-flex gap-3 justify-content-center">
                                <!-- Botón Guardar -->
                                <button class="btn btn-outline-custom">
                                    <i class="bi bi-save"></i> Guardar
                                </button>

                                <!-- Botón Subir Imagen  -->
                                <label class="btn btn-custom mb-0" for="inputImagenAgregar">
                                    <i class="bi bi-upload"></i> Subir Imagen
                                </label>
                                <input type="file" id="inputImagenAgregar" accept="image/*" style="display: none;" />
                            </div>
                        </div>

                        <div class="col-md-6 text-center">
                            <img src="imagen.jpg" alt="El Principito" width="250" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal exito -->
    <div class="modal fade" id="ModalExito" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">


                <div class="modal-body1">
                    <i class="bi bi-check-circle"></i>
                    <h5>¡Éxito!</h5>

                    <p>Se eliminó la copia del libro exitosamente.</p>
                </div>

                <div class="modal-footer justify-content-center border-0">
                    <button type="button" class="btn btn-primary w-100" style="max-width: 230px;" data-bs-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Error -->
    <div class="modal fade" id="modalError" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body2">
                    <i class="bi bi-exclamation-triangle"></i>
                    <h5>¡Error!</h5>
                    <p>Ocurrió un problema al eliminar la copia del libro.</p>
                </div>

                <div class="modal-footer justify-content-center border-0">
                    <button type="button" class="btn btn-primary w-100" style="max-width: 230px;" data-bs-dismiss="modal">Ok</button>
                </div>

            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


